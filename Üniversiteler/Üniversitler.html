<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ãœniversiteler - Campus Summer</title>
    <link rel="stylesheet" href="anasayfa.css">
    <link rel="stylesheet" href="Ã¼niversiteler.css">
</head>
<body>
    
    <header class="header">
        <div class="container">
            <div class="logo">
                <img src="2.3.logo.png" alt="Campus Summer Logo">
                <span>Campus Summer</span> 
            </div>
            
            <nav class="nav-menu">
                <div class="nav-item">
                    <a href="anasayfa.html" class="nav-link active">Anasayfa</a>
                </div>
                <div class="nav-item">
                    <a href="../Dersler/dersler.html" class="nav-link">Dersler</a>
                </div>
                <div class="nav-item">
                    <a href="../Ãœniversiteler/Ãœniversitler.html" class="nav-link">Ãœniversiteler</a>
                </div>
                <div class="nav-item">
                    <a href="../FakÃ¼lteler/fakÃ¼lteler.html" class="nav-link">FakÃ¼lteler</a>
                </div>
                <div class="nav-item">
                    <a href="../HakkÄ±mÄ±zda/HakkÄ±mÄ±zda.html" class="nav-link">HakkÄ±mÄ±zda</a>
                </div>
                <div class="nav-item">
                    <a href="../Ä°letiÅŸim/iletisim.html" class="nav-link">Ä°letiÅŸim</a>
                </div>
            </nav>

            
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1>Ãœniversiteler</h1>
                <p>200+ Ã¼niversiteden yaz dersleri ile akademik geleceÄŸinizi ÅŸekillendirin</p>
                <div class="hero-stats">
                    <div class="stat">
                        <div class="stat-number">200+</div>
                        <div class="stat-label">Ãœniversite</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">81</div>
                        <div class="stat-label">Åehir</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number">500+</div>
                        <div class="stat-label">Yaz Dersi</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Arama Section -->
    <section class="search-section">
        <div class="container">
            <div class="search-container">
                <div class="search-header-row">
                    <h2>Ãœniversite Ara</h2>
                    <button class="add-university-btn" id="addUniversityBtn" style="display: none;">
                        â• Ãœniversite Ekle
                    </button>
                </div>
                <div class="search-form">
                    <div class="search-input-group">
                        <input type="text" id="searchInput" placeholder="Ãœniversite adÄ± yazÄ±n..." class="search-input">
                        <button class="search-btn" onclick="searchUniversities()">ğŸ”</button>
                    </div>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">TÃ¼mÃ¼</button>
                        <button class="filter-btn" data-filter="devlet">Devlet</button>
                        <button class="filter-btn" data-filter="ozel">Ã–zel</button>
                        <button class="filter-btn" data-filter="vakif">VakÄ±f</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ãœniversiteler Section -->
    <section class="universiteler-section">
        <div class="container">
            <div class="section-header">
                <h2>PopÃ¼ler Ãœniversiteler</h2>
                <p>En Ã§ok tercih edilen Ã¼niversiteler ve yaz dersleri</p>
            </div>
            
            <div class="universiteler-grid" id="universitiesGrid">
                <!-- Ãœniversiteler dinamik olarak yÃ¼klenecek -->
            </div>
        </div>
    </section>

    <!-- Ãœniversite Ekleme Modal -->
    <div id="addUniversityModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="closeAddModal()">&times;</span>
            <h2>Yeni Ãœniversite Ekle</h2>
            <form id="addUniversityForm" onsubmit="addUniversity(event)">
                <div class="form-group">
                    <label for="universityName">Ãœniversite AdÄ± *</label>
                    <input type="text" id="universityName" required>
                </div>
                <div class="form-group">
                    <label for="universityCity">Åehir</label>
                    <input type="text" id="universityCity">
                </div>
                <div class="form-group">
                    <label for="universityWebsite">Web Sitesi</label>
                    <input type="url" id="universityWebsite" placeholder="https://www.universite.edu.tr">
                </div>
                <div class="form-group">
                    <label for="universityDescription">AÃ§Ä±klama</label>
                    <textarea id="universityDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="universityType">TÃ¼r</label>
                    <select id="universityType">
                        <option value="devlet">Devlet</option>
                        <option value="vakif">VakÄ±f</option>
                        <option value="ozel">Ã–zel</option>
                    </select>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="btn-primary">Ekle</button>
                    <button type="button" class="btn-secondary" onclick="closeAddModal()">Ä°ptal</button>
                </div>
            </form>
        </div>
    </div>

   <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Campus Summer</h3>
                    <p>TÃ¼rkiye'nin en kapsamlÄ± yaz dersleri takip platformu. Akademik hedeflerinize ulaÅŸmanÄ±n en kolay yolu.</p>
                </div>
                <div class="footer-section">
                    <h3>HÄ±zlÄ± BaÄŸlantÄ±lar</h3>
                    <a href="anasayfa.html">Ana Sayfa</a>
                    <a href="../Ãœniversiteler/Ãœniversitler.html">Ãœniversiteler</a>
                    <a href="../Dersler/dersler.html">Dersler</a>
                    <a href="../HakkÄ±mÄ±zda/HakkÄ±mÄ±zda.html">HakkÄ±mÄ±zda</a>
                </div>
                <div class="footer-section">
                    <h3>Destek</h3>                    
                    <a href="../Ä°letiÅŸim/iletisim.html">Ä°letiÅŸim</a>
                    <a href="../Gizlilik-politikasÄ±/gizlilikpolitikasÄ±.html">Gizlilik PolitikasÄ±</a>
                    
                </div>
                <div class="footer-section">
                    <h3>Ä°letiÅŸim</h3>
                    <p>ğŸ“§ atakan.baskir@std.hku.edu.tr</p>
                    <p>ğŸ“ +90 506 536 1780</p>
                    <p>ğŸ“ Gaziantep, TÃ¼rkiye</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Campus Summer. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
            </div>
        </div>
   </footer>
    
    <script>
        const API_URL = 'http://localhost:5500/api';
        let allUniversities = [];
        let currentFilter = 'all';
        let isAcademician = false;

        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            checkAuth();
            loadUniversities();
            setupFilterButtons();
            
            // "Ãœniversite Ekle" butonuna event listener ekle
            document.getElementById('addUniversityBtn')?.addEventListener('click', openAddModal);
        });

        // KullanÄ±cÄ± kimlik doÄŸrulamasÄ±nÄ± kontrol et
        function checkAuth() {
            const token = localStorage.getItem('token');
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            
            if (token && (user.userType === 'academician' || user.userType === 'admin')) {
                isAcademician = true;
                document.getElementById('addUniversityBtn').style.display = 'block';
            }
        }

        // Ãœniversiteleri yÃ¼kle
        async function loadUniversities() {
            try {
                const response = await fetch(`${API_URL}/universities`);
                const data = await response.json();
                
                if (data.success) {
                    allUniversities = data.universities;
                    displayUniversities(allUniversities);
                }
            } catch (error) {
                console.error('Ãœniversiteler yÃ¼klenirken hata:', error);
                // Hata durumunda varsayÄ±lan Ã¼niversiteleri gÃ¶ster
                displayDefaultUniversities();
            }
        }

        // Ãœniversiteleri gÃ¶ster
        function displayUniversities(universities) {
            const grid = document.getElementById('universitiesGrid');
            grid.innerHTML = '';

            if (universities.length === 0) {
                grid.innerHTML = '<p style="grid-column: 1/-1; text-align: center;">Ãœniversite bulunamadÄ±.</p>';
                return;
            }

            universities.forEach(uni => {
                const card = createUniversityCard(uni);
                grid.appendChild(card);
            });
        }

        // Ãœniversite kartÄ± oluÅŸtur
        function createUniversityCard(uni) {
            const card = document.createElement('div');
            card.className = 'universite-card';
            card.setAttribute('data-type', uni.type || 'devlet');

            // KÄ±saltma oluÅŸtur
            const shortName = uni.name.split(' ').map(word => word[0]).join('').toUpperCase().substring(0, 4);

            card.innerHTML = `
                ${isAcademician ? `<button class="delete-btn" onclick="deleteUniversity(${uni.id}, '${uni.name}')" title="Ãœniversiteyi Sil">ğŸ—‘ï¸</button>` : ''}
                <div class="universite-badge ${uni.type || 'devlet'}">${getTypeName(uni.type)}</div>
                <div class="universite-logo">
                    <span>${shortName}</span>
                </div>
                <h3>${uni.name}</h3>
                <p class="universite-location">ğŸ“ ${uni.city || 'TÃ¼rkiye'}</p>
                <div class="universite-stats">
                    <div class="stat-item">
                        <span class="stat-number">-</span>
                        <span class="stat-label">Yaz Dersi</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">-</span>
                        <span class="stat-label">FakÃ¼lte</span>
                    </div>
                </div>
                ${uni.website ? `<a href="${uni.website}" target="_blank" class="universite-button">Web Sitesine Git</a>` : '<button class="universite-button" disabled>Web Sitesi Yok</button>'}
            `;

            return card;
        }

        // Tip adÄ±nÄ± al
        function getTypeName(type) {
            const types = {
                'devlet': 'Devlet',
                'vakif': 'VakÄ±f',
                'ozel': 'Ã–zel'
            };
            return types[type] || 'Devlet';
        }

        // Filtre butonlarÄ±nÄ± ayarla
        function setupFilterButtons() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Aktif sÄ±nÄ±fÄ± deÄŸiÅŸtir
                    filterButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filtreyi uygula
                    currentFilter = this.getAttribute('data-filter');
                    applyFilter();
                });
            });
        }

        // Filtreyi uygula
        function applyFilter() {
            let filtered = allUniversities;
            
            if (currentFilter !== 'all') {
                filtered = allUniversities.filter(uni => uni.type === currentFilter);
            }
            
            displayUniversities(filtered);
        }

        // Arama yap
        function searchUniversities() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            let filtered = allUniversities.filter(uni => 
                uni.name.toLowerCase().includes(searchTerm) ||
                (uni.city && uni.city.toLowerCase().includes(searchTerm))
            );

            if (currentFilter !== 'all') {
                filtered = filtered.filter(uni => uni.type === currentFilter);
            }

            displayUniversities(filtered);
        }

        // Enter tuÅŸuyla arama
        document.getElementById('searchInput')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchUniversities();
            }
        });

        // Modal aÃ§
        function openAddModal() {
            document.getElementById('addUniversityModal').style.display = 'flex';
        }

        // Modal kapat
        function closeAddModal() {
            document.getElementById('addUniversityModal').style.display = 'none';
            document.getElementById('addUniversityForm').reset();
        }

        // Ãœniversite ekle
        async function addUniversity(event) {
            event.preventDefault();
            
            const token = localStorage.getItem('token');
            if (!token) {
                alert('LÃ¼tfen Ã¶nce giriÅŸ yapÄ±n');
                return;
            }

            const name = document.getElementById('universityName').value;
            const city = document.getElementById('universityCity').value;
            const website = document.getElementById('universityWebsite').value;
            const description = document.getElementById('universityDescription').value;
            const type = document.getElementById('universityType').value;

            try {
                const response = await fetch(`${API_URL}/universities`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        name,
                        city: city || null,
                        website: website || null,
                        description: description || null,
                        type: type || 'devlet'
                    })
                });

                const data = await response.json();

                if (data.success) {
                    alert('Ãœniversite baÅŸarÄ±yla eklendi!');
                    closeAddModal();
                    loadUniversities(); // Listeyi yenile
                } else {
                    alert('Hata: ' + data.message);
                }
            } catch (error) {
                console.error('Ãœniversite eklenirken hata:', error);
                alert('Ãœniversite eklenirken bir hata oluÅŸtu');
            }
        }

        // Ãœniversite sil
        async function deleteUniversity(id, name) {
            if (!confirm(`"${name}" Ã¼niversitesini silmek istediÄŸinizden emin misiniz?`)) {
                return;
            }

            const token = localStorage.getItem('token');
            if (!token) {
                alert('LÃ¼tfen Ã¶nce giriÅŸ yapÄ±n');
                return;
            }

            try {
                const response = await fetch(`${API_URL}/universities/${id}`, {
                    method: 'DELETE',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                const data = await response.json();

                if (data.success) {
                    alert('Ãœniversite baÅŸarÄ±yla silindi!');
                    loadUniversities(); // Listeyi yenile
                } else {
                    alert('Hata: ' + data.message);
                }
            } catch (error) {
                console.error('Ãœniversite silinirken hata:', error);
                alert('Ãœniversite silinirken bir hata oluÅŸtu');
            }
        }

        // VarsayÄ±lan Ã¼niversiteleri gÃ¶ster (API hatasÄ± durumunda)
        function displayDefaultUniversities() {
            const defaultUniversities = [
                { id: 1, name: 'Hasan Kalyoncu Ãœniversitesi', city: 'Gaziantep', type: 'ozel', website: 'https://www.hku.edu.tr' },
                { id: 2, name: 'Orta DoÄŸu Teknik Ãœniversitesi', city: 'Ankara', type: 'devlet', website: 'https://www.metu.edu.tr' },
                { id: 3, name: 'BoÄŸaziÃ§i Ãœniversitesi', city: 'Ä°stanbul', type: 'devlet', website: 'https://www.bogazici.edu.tr' },
                { id: 4, name: 'Ankara Ãœniversitesi', city: 'Ankara', type: 'devlet', website: 'https://www.ankara.edu.tr' },
                { id: 5, name: 'Ä°stanbul Ãœniversitesi', city: 'Ä°stanbul', type: 'devlet', website: 'https://www.istanbul.edu.tr' },
                { id: 6, name: 'Ä°stanbul Teknik Ãœniversitesi', city: 'Ä°stanbul', type: 'devlet', website: 'https://www.itu.edu.tr' },
                { id: 7, name: 'SabancÄ± Ãœniversitesi', city: 'Ä°stanbul', type: 'vakif', website: 'https://www.sabanciuniv.edu' },
                { id: 8, name: 'KoÃ§ Ãœniversitesi', city: 'Ä°stanbul', type: 'vakif', website: 'https://www.ku.edu.tr' }
            ];
            
            allUniversities = defaultUniversities;
            displayUniversities(defaultUniversities);
        }

        // Modal dÄ±ÅŸÄ±na tÄ±klanÄ±nca kapat
        window.onclick = function(event) {
            const modal = document.getElementById('addUniversityModal');
            if (event.target === modal) {
                closeAddModal();
            }
        }
    </script>

</body>
</html>